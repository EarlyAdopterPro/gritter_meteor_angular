<div class="grittr-container container">
  <div class="row grittr-row">
    <div class="col-xs-6">
      <h1> Grittr list ({{incompleteCount()}}) </h1>
    </div>
    <div class="col-xs-6">
      <login-buttons></login-buttons>
    </div>
   </div> <!--/row-->
   <div class="row grittr-row">
     <div class="col-md-12">
       <!-- TODO: resolve duplication of addTask function call, see button -->
       <form ng-submit="addTask(newTask, taskImportant, taskUrgent);
                          newTask=''; taskImportant=false; taskUrgent=false;">
       <div class="input-group btn-group" >
          <input type="text" class="form-control" 
                  ng-class="{'important':taskImportant, 'urgent':taskUrgent}" 
                  placeholder="new task" ng-model="newTask"/>
             <span class="input-group-btn">
                <label class="btn btn-default" ng-model="taskUrgent" 
                        btn-checkbox>
                  <span class="glyphicon glyphicon-fire"></span>
                </label>
                <label class="btn btn-default" ng-model="taskImportant" 
                        btn-checkbox>
                  <span class="glyphicon glyphicon-alert"></span>
                </label>
                <button class="btn btn-default" type="submit"> 
                  <span class="glyphicon glyphicon-plus"></span> 
                </button>
             </span> <!-- /input-group-btn -->
       </div><!-- /input-group btn-group-->
       </form>
     </div><!-- /col-md-12 -->
   </div><!-- /row grittr-row-->
   <!-- we have two nested reapeting rows per task -->
   <div class="row" ng-repeat="task in tasks">
     <div class ="col-xs-12">
       <div class="row grittr-li" 
        ng-class="{'checked':task.checked, 'private':task.private, 
                   'important':task.important, 'urgent':task.urgent,
                   'shadow':show}">
         <div class="col-xs-1 grittr-checkbox">
            <input type="checkbox" ng-checked="task.checked"
                   ng-click="setChecked(task); show=show" />
         </div><!-- /.col-md-1 --> 
         <div class="col-xs-11 grittr-padding text" ng-click="show=!show">
         <span class="pull-left crossed">
           {{task.text}} 
         </span>
         <span class="pull-right">
           <span  class="label label-default grittr-label"
              ng-show="task.owner != $root.currentUser._id"> shared </span> 
           <button class="delete" ng-click="deleteTask(task)">&times;</button>
         </span>
         </div> <!-- /.gritt-li .col-md-11 -->
       </div> <!-- /.gritt-ul .row-->
       <div class="row rolldown" ng-show="show">
          <div class="col-xs-6 submenu">
            <span 
              class="glyphicon glyphicon-user label label-default grittr-label"
              ng-show="task.owner != $root.currentUser._id"> <b>BY</b>: {{getUserById(task.owner).emails[0].address}}</span> 
             <span 
              class="glyphicon glyphicon-user grittr-label"
              ng-show="task.owner == $root.currentUser._id && task.sharedWith"> shared <b>WITH</b>: <br> {{getUserById(task.sharedWith[0]).emails[0].address}}</span> 
         </div>
          <div class="col-xs-6 submenu">
              <span class="glyphicon glyphicon-share grittr-label"> <a href="/share/{{task._id}}">Share</a></span>
          </div>
       </div> <!-- /.row .rolldown -->
     </div> <!-- /.col-xs-12 -->
   </div> <!-- /.row-->
</div> <!-- /.container --> 
